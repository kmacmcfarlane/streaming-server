version: "2"
services:
  streaming-server:
    image: kmacmcfarlane/streaming-server
    build:
      context: "../"
      dockerfile: "docker/streaming-server/Dockerfile"
    cpu_shares: 1024
    #mem_limit: 67108864
    environment:
      CONTAINER_NAME: streaming-server
    container_name: "streaming-server"
    ports:
      - "1935:1935"
      - "80:80"
    volumes:
      - space:/mnt/space
    command: "/bin/bash -c 'ls -l /mnt/space/streaming-server/streams/hls && nginx -g \"daemon off;\"'"
volumes:
  space:
